Created the shell directory
Inside Shell directory - created creatingusers file


shollay@webserver01:~/Desktop$ cd
shollay@webserver01:~$ mkdir Shell
shollay@webserver01:~$ cd Shell
shollay@webserver01:~/Shell$ touch creatingusers
shollay@webserver01:~/Shell$ sudo bash creatingusers
[sudo] password for shollay: 
shollay@webserver01:~/Shell$ cd /home
shollay@webserver01:/home$ cd
shollay@webserver01:~$ ls
Desktop    Downloads  Pictures  Shell      Videos
Documents  Music      Public    Templates
shollay@webserver01:~$ pwd
/home/shollay
shollay@webserver01:~$ mkdir .ssh
shollay@webserver01:~$ cd .ssh
shollay@webserver01:~/.ssh$ touch id_rsa
shollay@webserver01:~/.ssh$ vi touch id_rsa
2 files to edit
shollay@webserver01:~/.ssh$ ls 
id_rsa  touch
shollay@webserver01:~/.ssh$ rm touch id_rsa
shollay@webserver01:~/.ssh$ ls
shollay@webserver01:~/.ssh$ ls -a
.  ..
shollay@webserver01:~/.ssh$ touch id_rsa
shollay@webserver01:~/.ssh$ ls 
id_rsa
shollay@webserver01:~/.ssh$ vi id_rsa
shollay@webserver01:~/.ssh$ cat id_rsa
-----BEGIN OPENSSH PRIVATE KEY-----
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
kmaSGj362OnCCNAAAACWRhcmVARGFyZQE=
-----END OPENSSH PRIVATE KEY-----
shollay@webserver01:~$ sudo groupadd developers
shollay@webserver01:~$ cat /etc/group
shollay@webserver01:~/.ssh$ touch id_rsa.pub
shollay@webserver01:~/.ssh$ ls 
id_rsa  id_rsa.pub
shollay@webserver01:~/.ssh$ vi id_rsa.pub
shollay@webserver01:~/.ssh$ cat id_rsa.pub
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCzKZyicHxIkklSrNlxsJyyTrcIdBIt84Z0cQb3R4k0jH53kxkaT5hP8tfWTe62LXi7vV86fY+SX7TBNM76XGCbw/6vrMGegm6J1x2i1AiLNwq5nqTjOGn0AIwku4IlCCLAB7tdfRyVuCarmBlwny3lzRyybIUAWXR/D6vpN09MsDILbKdhay+Q/p9OUBMSLPqXdY/QIh/Oe3rVv1lwY3AohNfq7V3tO88zKswfA5iiexNiSYX1myT0OrX8cBE771j9quoNZhQgaLI1mIMtAvnHQChrn9k2nUaO/BMBCQGol5XzGv1ado7hgoVPoluIUD+FGNo/pH4zcmDLICH6drXY/C9MESnkMUPLFxBXKO/OitApY71vRao9nAhAwpVMsy6FqiOb5uawhvhoHYIHTV/f4EtagVagRMP2PxYMYR6jykIV4MPJTkCm+lGhTyMlRu+qRQjdLn8AAtHf4aEV8dIkoGh088DI7eA/4o0wz4OV4upH5ewSFS+5IHmRECEW5Nc=
shollay@webserver01:~/.ssh$ sudo chmod 400 id_rsa.pub
shollay@webserver01:~/Shell$ touch names.csv
shollay@webserver01:~/Shell$ vi names.csv
shollay@webserver01:~/Shell$ cat names.csv
Korede
Dammy
Deji
Siju
Dayo
Kayode
Dejo
Sanjo
Demola
Bayo
Deola
Dele
Bingo
Dele
Banjo
Dara 
Kore
Ayo
Segun
Bandele
shollay@webserver01:~$ sudo groupadd developers
shollay@webserver01:~$ cat /etc/group
developers:x:1001:
shollay@webserver01:~$ cd Shell
shollay@webserver01:~/Shell$ touch onboardingusers
shollay@webserver01:~/Shell$ ls
creatingusers  names.csv  onboardingusers
shollay@webserver01:~/Shell$ vi onboardingusers
shollay@webserver01:~/Shell$ cat onboardingusers
#!/bin/bash
userfile=$(cat names.csv)
    if [ $(id -u) -eq 0 ]; then
# Reading the CSV file
    for user in $userfile;
    do
            echo $user
        if id "$user" &>/dev/null
        then
            echo "User Exist"
        else
# This will create a new user
        useradd -m -d /home/$user -s /bin/bash -g developers $user
        echo "New User Created"
        echo
# This will create a ssh folder in the user home folder
        su - -c "mkdir ~/.ssh" $user
        echo ".ssh directory created for new user"
        echo
# We need to set the user permission for the ssh dir
         su - -c "chmod 700 ~/.ssh" $user
         echo "user permission for .ssh directory set"
         echo
# This will create an authorized-key file
        su - -c "touch ~/.ssh/authorized_keys" $user
        echo "Authorized Key File Created"
        echo
# We need to set permission for the key file
        su - -c "chmod 600 ~/.ssh/authorized_keys" $user
        echo "user permission for the Authorized Key File set"
        echo
# We need to create and set public key for users in the server
        cp -R "/home/shollay/.ssh/id_rsa.pub" "/home/$user/.ssh/authorized_keys"
        echo "Copyied the Public Key to New User Account on the server"
        echo
        echo
        echo "USER CREATED"
            fi
        done
    else
    echo "Only Admin Can Onboard A User"
    fi
shollay@webserver01:~/Shell$ chmod x+a onboardingusers
chmod: invalid mode: ‘x+a’
Try 'chmod --help' for more information.
shollay@webserver01:~/Shell$ chmod a+x onboardingusers
shollay@webserver01:~/Shell$ sudo ./onboardingusers
Korede
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Dammy
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Deji
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Siju
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Dayo
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Kayode
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Dejo
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Sanjo
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Demola
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Bayo
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Deola
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Dele
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Bingo
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Dele
User Exist
Banjo
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Dara
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Kore
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Ayo
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Segun
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED
Bandele
New User Created

.ssh directory created for new user

user permission for .ssh directory set

Authorized Key File Created

user permission for the Authorized Key File set

Copyied the Public Key to New User Account on the server


USER CREATED





